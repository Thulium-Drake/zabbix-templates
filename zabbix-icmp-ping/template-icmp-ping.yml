zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: 36bff6c29af64692839d077febfc7079
      name: 'Templates/Network devices'
  templates:
    - uuid: 37e5eb5606bc4abba66c8b20381a1e8a
      template: 'ICMP Ping'
      name: 'ICMP Ping'
      description: |
        Template Net ICMP Ping
        
        Generated by official Zabbix template tool "Templator"
      vendor:
        name: Zabbix
        version: 6.4-0
      groups:
        - name: 'Templates/Network devices'
      items:
        - uuid: 9951ce6738014012930dc36a99ab2a03
          name: 'ICMP: ICMP response time average (1m)'
          type: CALCULATED
          key: icmp.response.average
          delay: 5s
          value_type: FLOAT
          units: s
          params: 'avg(//icmppingsec,1m)'
        - uuid: 895f4695b88944c9b98ddb58986073d9
          name: 'ICMP: ICMP response time max (1m)'
          type: CALCULATED
          key: icmp.response.max
          delay: 5s
          value_type: FLOAT
          units: s
          params: 'max(//icmppingsec,1m)'
        - uuid: 8a7f5cfa51354986a63d40e305239830
          name: 'ICMP: ICMP response time min (1m)'
          type: CALCULATED
          key: icmp.response.min
          delay: 5s
          value_type: FLOAT
          units: s
          params: 'min(//icmppingsec,1m)'
        - uuid: db5a94f6cea14deba957202b2f014469
          name: 'ICMP: ICMP ping'
          type: SIMPLE
          key: icmpping
          delay: 5s
          history: 7d
          valuemap:
            name: 'Service state'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: b030876299434f3ba43e11c584104a81
              expression: 'max(/ICMP Ping/icmpping,#3)=0'
              name: 'ICMP: Unavailable by ICMP ping'
              priority: HIGH
              description: 'Last three attempts returned timeout.  Please check device connectivity.'
              tags:
                - tag: scope
                  value: availability
        - uuid: 04b21adaf422473a88df2c52786474ed
          name: 'ICMP: ICMP loss'
          type: SIMPLE
          key: icmppingloss
          delay: 5s
          history: 7d
          value_type: FLOAT
          units: '%'
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 42c4b0310aaf4b9c8cb502542b7dea90
              expression: 'min(/ICMP Ping/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/ICMP Ping/icmppingloss,5m)<100'
              name: 'ICMP: High ICMP ping loss'
              opdata: 'Loss: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: 'ICMP: Unavailable by ICMP ping'
                  expression: 'max(/ICMP Ping/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
        - uuid: a79e33e5fd264725b934f603fa071555
          name: 'ICMP: ICMP response time'
          type: SIMPLE
          key: icmppingsec
          delay: 5s
          history: 7d
          value_type: FLOAT
          units: s
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
          triggers:
            - uuid: 32b4d8f3eba34bd380803410111d4b7f
              expression: 'avg(/ICMP Ping/icmppingsec,5m)>{$ICMP_RESPONSE_TIME_WARN}'
              name: 'ICMP: High ICMP ping response time'
              opdata: 'Value: {ITEM.LASTVALUE1}'
              priority: WARNING
              dependencies:
                - name: 'ICMP: High ICMP ping loss'
                  expression: 'min(/ICMP Ping/icmppingloss,5m)>{$ICMP_LOSS_WARN} and min(/ICMP Ping/icmppingloss,5m)<100'
                - name: 'ICMP: Unavailable by ICMP ping'
                  expression: 'max(/ICMP Ping/icmpping,#3)=0'
              tags:
                - tag: scope
                  value: availability
                - tag: scope
                  value: performance
      tags:
        - tag: class
          value: network
        - tag: target
          value: icmp
      macros:
        - macro: '{$ICMP_LOSS_WARN}'
          value: '20'
        - macro: '{$ICMP_RESPONSE_TIME_WARN}'
          value: '0.15'
      valuemaps:
        - uuid: bdb5d65d925542eaa61c302dc40fbfe8
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
  graphs:
    - uuid: f56c7dec8a604fb8b80eee1a0cdf0f32
      name: 'ICMP Latency'
      graph_items:
        - drawtype: FILLED_REGION
          color: D2D2D2
          calc_fnc: ALL
          item:
            host: 'ICMP Ping'
            key: icmp.response.max
        - sortorder: '1'
          drawtype: FILLED_REGION
          color: FFFFFF
          calc_fnc: ALL
          item:
            host: 'ICMP Ping'
            key: icmp.response.min
        - sortorder: '2'
          color: 80FF00
          calc_fnc: ALL
          item:
            host: 'ICMP Ping'
            key: icmp.response.average
        - sortorder: '3'
          drawtype: FILLED_REGION
          color: '000000'
          yaxisside: RIGHT
          calc_fnc: ALL
          item:
            host: 'ICMP Ping'
            key: icmppingloss
